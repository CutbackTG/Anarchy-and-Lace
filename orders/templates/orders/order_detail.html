{% extends "base.html" %}
{% block content %}
<section class="shop">
  <div class="glass-panel" style="padding:18px;">
    <h1>Order {{ order.order_number }}</h1>
    <p style="opacity:.9;">{{ order.created_at|date:"j M Y, H:i" }} • {{ order.status|title }}</p>

    <h3 style="margin-top:14px;">Items</h3>
    <ul style="list-style:none; padding-left:0;">
      {% for item in order.items.all %}
        <li style="padding:10px 0; border-bottom:1px solid rgba(255,255,255,0.08);">
          <div style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap;">
            <div>
              <strong>{{ item.product_name }}</strong>
              <div style="opacity:.85; font-size:0.95rem;">
                Qty {{ item.quantity }} • {{ item.unit_price }} each
              </div>
            </div>
            <div><strong>{{ item.line_total }}</strong></div>
          </div>

          {% if item.product %}
            <div style="margin-top:8px;">
              <a class="button" href="{% url 'catalog:product_detail' item.product.id %}">View product</a>
            </div>
          {% endif %}
        </li>
      {% endfor %}
    </ul>

    <h3 style="margin-top:14px;">Shipping</h3>
    <p style="opacity:.9;">
      {{ order.shipping_name }}<br>
      {{ order.shipping_line1 }}{% if order.shipping_line2 %}<br>{{ order.shipping_line2 }}{% endif %}<br>
      {{ order.shipping_city }}<br>
      {{ order.shipping_postcode }}<br>
      {{ order.shipping_country }}
    </p>

    <h3 style="margin-top:14px;">Totals</h3>
    <p style="opacity:.9;">
      Subtotal: {{ order.subtotal }} {{ order.currency }}<br>
      Shipping: {{ order.shipping_cost }} {{ order.currency }}<br>
      <strong>Total: {{ order.total }} {{ order.currency }}</strong>
    </p>

    <div style="margin-top:14px;">
      <a class="button button--gold" href="{% url 'orders:my_orders' %}">Back to orders</a>
    </div>
  </div>
</section>
{% endblock %}
