{% extends 'base.html' %}
{% load static %}

{% block content %}
  <section class="shop">
    <div class="shop-top glass-panel">
      <header class="shop-header">
        <h1>Kimono fabric Jackets</h1>
        <p>Vintage Japanese textiles, reworked &amp; unique art pieces.</p>
      </header>

      <nav class="collections">
        <a href="{% url 'catalog:product_list' %}" class="{% if not current_collection %}active{% endif %}">All</a>
        {% for collection in collections %}
          <a href="?collection={{ collection.slug }}" class="{% if current_collection == collection.slug %}active{% endif %}">{{ collection.name }}</a>
        {% endfor %}
      </nav>
    </div>

    <div class="product-grid">
      {% for product in products %}
        <a class="product-card" href="{% url 'catalog:product_detail' product.slug %}">
          <div class="product-media">
            {% with img=product.images.all|first %}
              {% if img and img.image %}
                <img src="{{ img.image.url }}" alt="{{ product.name }}" class="product-img" />
                <small style="display:block; padding:6px 10px; color:#666; word-break:break-all;">{{ img.image.url }}</small>
              {% else %}
                <div class="img-placeholder">No image yet</div>
              {% endif %}
            {% endwith %}
          </div>

          <div class="product-meta">
            <h2 class="product-title">{{ product.name }}</h2>
            <p class="product-price">Â£{{ product.price }}</p>
          </div>
        </a>
      {% empty %}
        <p>No products found.</p>
      {% endfor %}
    </div>
  </section>
{% endblock %}
